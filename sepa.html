<!--
Following script tag defines the node
-->

<script type="text/javascript">
    RED.nodes.registerType('sepa',{
        category: 'function',
        color: '#A6BBCF',
        defaults: {
            name: {value: ""},
            topic: {value: ""},
            initname: {value: "", required: true},
            initiban: {value: "", required: true},
            initbic: {value: ""},
            fileid: {value: ""},
            msgid: {value: ""},
            batchbooking: {value: ""},
            executiondate: {value: ""},
            messagetype: {value: ""}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-bank",
        label: function() {
            return this.name||"SEPA";
        },
        paletteLabel: "SEPA",
        oneditprepare: function() {
          // List of msg types in nodes edit dialog
            $("#node-input-messagetype").typedInput({
                types: [
                    {
                        value: "messagetype",
                        options: [
                            { value: "pain.001.001.03", label: "pain.001.001.03 (SEPA-Credit-Transfer)" },
                            { value: "pain.008.001.02", label: "pain.008.001.02 (SEPA-Direct-Debit)" }
                        ]
                    }
                ]
            })





        }

    });
</script>






<!--
Define the edit dialog
-->

<script type="text/html" data-template-name="sepa">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="node's name">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tag"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="topic">
    </div>
    <div class="form-row">
        <label for="node-input-messagetype"><i class="fa fa-address-card"></i> Message type</label>
        <input type="text" id="node-input-messagetype" />
    </div>
    <div class="form-row">
        <p><strong>Initiator</strong></p>
    </div>
    <div class="form-row">
        <label for="node-input-initname"><i class="fa fa-address-card"></i> Name</label>
        <input type="text" id="node-input-initname" placeholder="e.g. John Doe" />
    </div>
    <div class="form-row">
        <label for="node-config-initiban"><i class="fa fa-address-card"></i> IBAN</label>
        <input type="text" id="node-input-initiban" placeholder="initiator's IBAN" />
    </div>
    <div class="form-row">
        <label for="node-config-initbic"><i class="fa fa-address-card"></i> BIC</label>
        <input type="text" id="node-input-initbic" placeholder="initiator's BIC" />
    </div>
    <div class="form-row">
        <p><strong>Messaging</strong></p>
    </div>
    <div class="form-row">
        <label for="node-input-fileid"><i class="fa fa-address-card"></i> File ID</label>
        <input type="text" id="node-input-fileid" placeholder="Your file id" />
    </div>
    <div class="form-row">
        <label for="node-input-msgid"><i class="fa fa-address-card"></i> Message ID</label>
        <input type="text" id="node-input-msgid" placeholder="Your message id" />
    </div>
    <div class="form-tips">
        <p></p>
        <p>Hint: Your choice should be wise</p>
        <ul>
            <li>fill all fields</li>
            <li>don't use spaces</li>
            <li>be specific</li>
        </ul>
    </div>


</script>






<!--
Help section of the node
-->

<script type="text/html" data-help-name="sepa">
    <p>A node to create SEPA payment files</p>
   <h3>Inputs</h3>
    <dl class="message-properties">
      <dt class="optional">payload <span class="property-type">string</span></dt>
      <dd> if no action is set in the node configuration panel, this property specifies the action to be send to the TV.</dd>
    </dl>

  <h3>Outputs</h3>

  <h3>Details</h3>
    <p>The node sends a single action to the TV.<br>
    If no action is given in the node configuration panel, then the action in <code>msg.payload</code> is used.</p>

  <h3>References</h3>
    <ul>
      <li><a href="https://github.com/halli77/node-red-contrib-sepa">GitHub</a> - the nodes github repository</li>
    </ul>
</script>
